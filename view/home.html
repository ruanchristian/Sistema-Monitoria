<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="author" content="Ruan Christian" />
    <title>Home</title>
    <!-- lib PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <link href="https://cdn.datatables.net/1.13.1/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.6.1.js" integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="/Sistema Monitoria/assets/styles/styles.css">
    <link rel="stylesheet" href="/Sistema Monitoria/assets/styles/cronograma.css">
    <link rel="icon" href="/Sistema Monitoria/assets/img/infortec2b-icon.png">
    
    <!-- Font Awesome LIB -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/js/fontawesome.min.js" integrity="sha512-j3gF1rYV2kvAKJ0Jo5CdgLgSYS7QYmBVVUjduXdoeBkc4NFV4aSRTi+Rodkiy9ht7ZYEwF+s09S43Z1Y+ujUkA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>

<body class="sb-nav-fixed">
    {% include 'template-menu.html' %}

    <div id="layoutSidenav_content">
        <main>
            <div class="container-fluid px-4">
                <h1 class="mt-4">Sistema de monitoria dos laboratórios</h1>
                <ol class="breadcrumb mb-4">
                    <li class="breadcrumb-item active">Dashboard</li>
                </ol>
                <div class="row">
                    <div class="col-xl-3 col-md-6">
                        <div class="card bg-primary bg-gradient text-white mb-4">
                            <div class="card-body">
                                <i class="fas fa-users"></i>
                                Alunos
                                <h3 class="float-end">{{totalAlunos}}</h3>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6">
                        <div class="card bg-warning bg-gradient text-white w-10 mb-4">
                            <div class="card-body">
                                <i class="fas fa-crown"></i>
                                Monitores
                                <h3 class="float-end">{{totalMonitores}}</h3>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6">
                        <div class="card bg-success bg-gradient text-white mb-4">
                            <div class="card-body">
                                <i class="fas fa-code"></i>
                                Administradores
                                <h3 class="float-end">{{totalAdmins}}</h3>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6">
                        <div class="card bg-danger bg-gradient text-white mb-4">
                            <div class="card-body">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-circle-fill" viewBox="0 0 16 16">
                                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>
                                  </svg>
                                 Ocorrências/Obs
                                <h3 class="float-end">{{totalOcorrencias}}</h3>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xl-6">
                        <div class="card mb-4">
                            <div class="card-header">
                                <i class="fas fa-chart-bar me-1"></i>
                                Verifique a monitoria da semana
                                <button class="btn btn-primary float-end" id="pdfDownload"><i class="fas fa-download"></i></button>
                            </div>
                            <div class="card-body">
                                <div class="c26 doc-content">
                                    <p class="c15">
                                        <img loading="lazy" src="/Sistema Monitoria/assets/img/eeepjas-icone.svg" width="130rem">
                                    </p>
                                    <p class="c15"><span class="c17">Alunos Monitores do dia</span></p>
                                    <p class="c15"><span id="cron" class="c20">Gerando...</span></p>
                                    <p class="c14"><span class="c20"></span></p><a
                                        id="t.8c706dbf1a5943b7d5c03587dcd8ad326b92248c"></a><a id="t.0"></a>
                                    <table class="c19"></table>
                                </div>
                                <div class="card-footer text-muted">
                                    <span class="float-end">Atualizado por: <strong> RUAN CHRISTIAN FERNANDES DE SOUSA </strong></span>
                                  </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-6">
                        <div class="card mb-4">
                            <div class="card-header">
                                <i class="fas fa-code me-1"></i>
                                Administradores
                            </div>
                            <div class="card-body">
                                {% if admins %}
                                <ul class="list-group">
                                    {% for admin in admins %}

                                    <li class="list-group-item">{{admin['usuario']}}</li>

                                    {% endfor %}

                                </ul>

                                {% else %}
                                <p> Não existem admins cadastrados </p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                <div id="alunos" class="card mb-4">
                    <div class="card-header">
                        <i class="fas fa-users me-1"></i>
                        Tabela de Alunos
                    </div>
                    <div class="card-body">
                        <table id="datatable">
                            <thead>
                                <tr>
                                    <th class="theader">Matrícula</th>
                                    <th class="theader">Nome</th>
                                    <th class="theader">Turma</th>
                                </tr>
                            </thead>
                            <tbody>
                             {% if alunos %}
                                {% for aluno in alunos['list'] %}

                                {% if aluno['matricula'] in monitores %}

                                <tr>
                                    <th>{{ aluno['matricula'] }}</th>
                                    <td>{{ aluno['nome'] }} <img width="25rem" src="/Sistema Monitoria/assets/img/verificado.svg"></td>
                                    <td>{{ aluno['turma'] }}</td>
                                </tr>

                                {% else %}

                                <tr>
                                    <th>{{ aluno['matricula'] }}</th>
                                    <td>{{ aluno['nome'] }}</td>
                                    <td>{{ aluno['turma'] }}</td>
                                </tr>

                                {% endif %}
                                {% endfor %}
                              {% endif %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
        <div id="modalSpin" class="modal fade" data-bs-keyboard="false" data-bs-backdrop="static" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalLabel">Baixando em pdf...</h5>
                    </div>
                    <div class="modal-body mx-auto d-block">
                        <div class="d-flex justify-content-center">
                            <div style="width: 3rem; height: 3rem;" class="spinner-border"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer class="py-4 bg-light mt-auto">
            <div class="container-fluid px-4">
                <div class="d-flex align-items-center justify-content-between small">
                    <div class="text-muted">Criado por &copy; <strong>
                            <a class="text-decoration-none" target="_blank"
                                href="https://www.instagram.com/ruanchristian7/">Ruan Christian</a>
                        </strong>
                        <script>
                            document.write(new Date().getFullYear());
                        </script>
                    </div>
                </div>
            </div>
        </footer>
    </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous">
    </script>
    <script src="/Sistema Monitoria/assets/js/frames.js"></script>
    <script src="/Sistema Monitoria/assets/js/my-algorithm-rotation.js"></script>
    <script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js" crossorigin="anonymous"></script>
</body>
</html>